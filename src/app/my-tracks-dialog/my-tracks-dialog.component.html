<h2 mat-dialog-title>Mis tracks en eventos</h2>
<div mat-dialog-content class="table-wrapper">
  <table class="tracks-table">
    <thead>
      <tr>
        <th>
          <button type="button" class="sort-button" (click)="sortBy('year')" aria-label="Ordenar por a√±o">
            A√±o <span class="sort-indicator">{{ resolveSortIndicator('year') }}</span>
          </button>
        </th>
        <th>Evento</th>
        <th>
          <button type="button" class="sort-button" (click)="sortBy('province')" aria-label="Ordenar por provincia">
            Provincia <span class="sort-indicator">{{ resolveSortIndicator('province') }}</span>
          </button>
        </th>
        <th>
          <button type="button" class="sort-button" (click)="sortBy('population')" aria-label="Ordenar por poblaci√≥n">
            Poblaci√≥n <span class="sort-indicator">{{ resolveSortIndicator('population') }}</span>
          </button>
        </th>
        <th>
          <button type="button" class="sort-button" (click)="sortBy('autonomousCommunity')" aria-label="Ordenar por comunidad">
            Comunidad <span class="sort-indicator">{{ resolveSortIndicator('autonomousCommunity') }}</span>
          </button>
        </th>
        <th>Distancia (km)</th>
        <th>Tiempo en movimiento</th>
        <th>Tiempo total</th>
        <th class="icon-col">Descargar</th>
        <th class="icon-col">Eliminar</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of sortedRows">
        <td data-label="A√±o">{{ row.year }}</td>
        <td data-label="Evento">{{ row.eventName }}</td>
        <td data-label="Provincia">{{ row.province || '‚Äî' }}</td>
        <td data-label="Poblaci√≥n">{{ row.population || '‚Äî' }}</td>
        <td data-label="Comunidad">{{ row.autonomousCommunity || '‚Äî' }}</td>
        <td data-label="Distancia (km)">{{ row.distanceKm | number:'1.1-1' }}</td>
        <td data-label="Tiempo en movimiento">{{ formatDuration(row.timeSeconds) }}</td>
        <td data-label="Tiempo total">{{ formatDuration(row.totalTimeSeconds) }}</td>
        <td data-label="Descargar" class="icon-col">
          <button
            type="button"
            class="icon-button"
            [disabled]="isDownloading(row)"
            (click)="downloadTrack(row)">
            <span aria-hidden="true">‚¨áÔ∏è</span>
            <span class="sr-only">Descargar</span>
          </button>
        </td>
        <td data-label="Eliminar" class="icon-col">
          <button
            type="button"
            class="icon-button danger"
            [disabled]="isDeleting(row)"
            (click)="confirmDelete(row)">
            <span aria-hidden="true">üóëÔ∏è</span>
            <span class="sr-only">Eliminar</span>
          </button>
        </td>
      </tr>
      <tr *ngIf="!rows.length">
        <td colspan="10" class="empty">Sin tracks para mostrar.</td>
      </tr>
    </tbody>
  </table>
</div>
<div mat-dialog-actions align="end">
  <button mat-button (click)="close()">Cerrar</button>
</div>
