<div class="map-wrap" [class.aspect-vertical]="isVerticalViewport">
  <div id="map"></div>

  <!-- UI superpuesta -->
  <div class="map-ui" aria-label="Cabecera de comparaciÃ³n">
    <div class="map-logo" *ngIf="logoDataUrl">
      <img [src]="logoDataUrl" alt="logo carrera">
    </div>

    <div class="map-title">
      <ng-container *ngFor="let track of trackMetas; let last = last">
        <span class="title-chip" [style.borderColor]="track.color" [style.color]="track.color" [title]="track.name">{{ track.name }}</span>
        <span class="vs" *ngIf="!last">VS</span>
      </ng-container>
    </div>

    <a class="start-btn" routerLink="/">Volver al inicio</a>
    <!-- <a class="stop-rec" (click)="stopRecordingAndDownload()" *ngIf="rec.isRecording">â¹ Stop & Download</a> -->
  </div>

  <!-- â¬‡ï¸ Overlay de inicio -->
  <div class="start-overlay" *ngIf="showStartOverlay">
    <button class="big-start" (click)="onStartClick()">â–¶ Start</button>
  </div>

  <div class="info-overlay" *ngIf="showUniformSpeedDialog">
    <div class="info-dialog" role="dialog" aria-modal="true" aria-label="Aviso de reproducciÃ³n uniforme">
      <p>El track cargado no contiene informaciÃ³n del tiempo, por lo que la representaciÃ³n se realizarÃ¡ uniformemente sin tener en cuenta tramos mÃ¡s rÃ¡pidos o lentos y se mostrarÃ¡ a velocidad constante.</p>
      <button type="button" class="info-btn" (click)="dismissUniformSpeedDialog()">Entendido</button>
    </div>
  </div>

  <div class="ranking-overlay" *ngIf="showRanking && ranking.length">
    <div class="ranking-panel" aria-label="ClasificaciÃ³n final">
      <div class="ranking-title">ğŸ Ranking final</div>
      <ol class="ranking-list">
        <li *ngFor="let item of ranking; index as i" [class.top-entry]="i < 3">
          <div class="ranking-medal" [ngClass]="item.medal">
            <span *ngIf="item.medal">{{ item.medal === 'gold' ? 'ğŸ¥‡' : item.medal === 'silver' ? 'ğŸ¥ˆ' : 'ğŸ¥‰' }}</span>
            <span *ngIf="!item.medal" class="ranking-number">#{{ i + 1 }}</span>
          </div>
          <div class="ranking-runner">
            <span class="runner-name" [style.color]="item.color" [style.borderColor]="item.color" [title]="item.name">{{ item.name }}</span>
            <span class="runner-time">{{ formatRaceTime(item.durationMs) }}</span>
          </div>
        </li>
      </ol>
    </div>
  </div>
</div>
<!-- Overlay Start ya lo tienes -->



<audio
  id="background-music-carrera"
  src="assets/musica/carrera.mp3"
  preload="auto"
  playsinline
  loop
></audio>
